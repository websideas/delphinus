!function(e){function t(t,n,i){var r=t.offset().top,a=t.offset().left,s=i.position.split(/,?\s+/),o=s[0];return s=s[1],r-=n.outerHeight()-i.offset[0],a+=t.outerWidth()+i.offset[1],/iPad/i.test(navigator.userAgent)&&(r-=e(window).scrollTop()),i=n.outerHeight()+t.outerHeight(),"center"==o&&(r+=i/2),"bottom"==o&&(r+=i),t=t.outerWidth(),"center"==s&&(a-=(t+n.outerWidth())/2),"left"==s&&(a-=t),{top:r,left:a}}function n(e){function t(){return this.getAttribute("type")==e}return t.key="[type="+e+"]",t}function i(n,i,a){function s(t,n,i){if(a.grouped||!t.length){var s;i===!1||e.isArray(i)?(s=r.messages[n.key||n]||r.messages["*"],s=s[a.lang]||r.messages["*"].en,(n=s.match(/\$\d/g))&&e.isArray(i)&&e.each(n,function(e){s=s.replace(this,i[e])})):s=i[a.lang]||i,t.push(s)}}var u=this,l=i.add(u);n=n.not(":button, :image, :reset, :submit"),e.extend(u,{getConf:function(){return a},getForm:function(){return i},getInputs:function(){return n},reflow:function(){return n.each(function(){var n=e(this),i=n.data("msg.el");i&&(n=t(n,i,a),i.css({top:n.top,left:n.left}))}),u},invalidate:function(t,i){if(!i){var r=[];e.each(t,function(e,t){e=n.filter("[name='"+e+"']"),e.length&&(e.trigger("OI",[t]),r.push({input:e,messages:[t]}))}),t=r,i=e.Event()}return i.type="onFail",l.trigger(i,[t]),i.isDefaultPrevented()||c[a.effect][0].call(u,t,i),u},reset:function(t){return t=t||n,t.removeClass(a.errorClass).each(function(){var t=e(this).data("msg.el");t&&(t.remove(),e(this).data("msg.el",null))}).unbind(a.errorInputEvent||""),u},destroy:function(){return i.unbind(a.formEvent+".V").unbind("reset.V"),n.unbind(a.inputEvent+".V").unbind("change.V"),u.reset()},checkValidity:function(t,i){if(t=t||n,t=t.not(":disabled"),!t.length)return!0;if(i=i||e.Event(),i.type="onBeforeValidate",l.trigger(i,[t]),i.isDefaultPrevented())return i.result;var r=[];t.not(":radio:not(:checked)").each(function(){var t=[],n=e(this).data("messages",t),c=o&&n.is(":date")?"onHide.v":a.errorInputEvent+".v";return n.unbind(c),e.each(f,function(){var e=this,r=e[0];if(n.filter(r).length&&(e=e[1].call(u,n,n.val()),e!==!0)){if(i.type="onBeforeFail",l.trigger(i,[n,r]),i.isDefaultPrevented())return!1;var o=n.attr(a.messageAttr);if(o)return t=[o],!1;s(t,r,e)}}),t.length&&(r.push({input:n,messages:t}),n.trigger("OI",[t]),a.errorInputEvent&&n.bind(c,function(e){u.checkValidity(n,e)})),a.singleError&&r.length?!1:void 0});var d=c[a.effect];if(!d)throw'Validator: cannot find effect "'+a.effect+'"';return r.length?(u.invalidate(r,i),!1):(d[1].call(u,t,i),i.type="onSuccess",l.trigger(i,[t]),t.unbind(a.errorInputEvent+".v"),!0)}}),e.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(t,n){e.isFunction(a[n])&&e(u).bind(n,a[n]),u[n]=function(t){return t&&e(u).bind(n,t),u}}),a.formEvent&&i.bind(a.formEvent+".V",function(e){return u.checkValidity(null,e)?void 0:e.preventDefault()}),i.bind("reset.V",function(){u.reset()}),n[0]&&n[0].validity&&n.each(function(){this.oninvalid=function(){return!1}}),i[0]&&(i[0].checkValidity=u.checkValidity),a.inputEvent&&n.bind(a.inputEvent+".V",function(t){u.checkValidity(e(this),t)}),n.filter(":checkbox, select").filter("[required]").bind("change.V",function(t){var n=e(this);(this.checked||n.is("select")&&e(this).val())&&c[a.effect][1].call(u,n,t)});var d=n.filter(":radio").change(function(e){u.checkValidity(d,e)});e(window).resize(function(){u.reflow()})}e.tools=e.tools||{version:"1.2.5"};var r,a=/\[type=([a-z]+)\]/,s=/^-?[0-9]*(\.[0-9]+)?$/,o=e.tools.dateinput,u=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,l=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i;r=e.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(t,n){e.each(n,function(e,n){r.messages[e]=r.messages[e]||{},r.messages[e][t]=n})},localizeFn:function(t,n){r.messages[t]=r.messages[t]||{},e.extend(r.messages[t],n)},fn:function(t,i,r){e.isFunction(i)?r=i:("string"==typeof i&&(i={en:i}),this.messages[t.key||t]=i),(i=a.exec(t))&&(t=n(i[1])),f.push([t,r])},addEffect:function(e,t,n){c[e]=[t,n]}};var f=[],c={"default":[function(n){var i=this.getConf();e.each(n,function(n,r){n=r.input,n.addClass(i.errorClass);var a=n.data("msg.el");a||(a=e(i.message).addClass(i.messageClass).appendTo(document.body),n.data("msg.el",a)),a.css({visibility:"hidden"}).find("p").remove(),e.each(r.messages,function(t,n){e("<p/>").html(n).appendTo(a)}),a.outerWidth()==a.parent().width()&&a.add(a.find("p")).css({display:"inline"}),r=t(n,a,i),a.css({visibility:"visible",position:"absolute",top:r.top,left:r.left}).fadeIn(i.speed)})},function(t){var n=this.getConf();t.removeClass(n.errorClass).each(function(){var t=e(this).data("msg.el");t&&t.css({visibility:"hidden"})})}]};e.each("email,url,number".split(","),function(t,n){e.expr[":"][n]=function(e){return e.getAttribute("type")===n}}),e.fn.oninvalid=function(e){return this[e?"bind":"trigger"]("OI",e)},r.fn(":email","Please enter a valid email address",function(e,t){return!t||u.test(t)}),r.fn(":url","Please enter a valid URL",function(e,t){return!t||l.test(t)}),r.fn(":number","Please enter a numeric value.",function(e,t){return s.test(t)}),r.fn("[max]","Please enter a value smaller than $1",function(e,t){return""===t||o&&e.is(":date")?!0:(e=e.attr("max"),parseFloat(t)<=parseFloat(e)?!0:[e])}),r.fn("[min]","Please enter a value larger than $1",function(e,t){return""===t||o&&e.is(":date")?!0:(e=e.attr("min"),parseFloat(t)>=parseFloat(e)?!0:[e])}),r.fn("[required]","Please complete this mandatory field.",function(e,t){return e.is(":checkbox")?e.is(":checked"):!!t}),r.fn("[pattern]",function(e){var t=new RegExp("^"+e.attr("pattern")+"$");return t.test(e.val())}),e.fn.validator=function(t){var n=this.data("validator");return n&&(n.destroy(),this.removeData("validator")),t=e.extend(!0,{},r.conf,t),this.is("form")?this.each(function(){var r=e(this);n=new i(r.find(":input"),r,t),r.data("validator",n)}):(n=new i(this,this.eq(0).closest("form"),t),this.data("validator",n))}}(jQuery);